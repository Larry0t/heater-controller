[
  {
    "id": "heater-status-panel",
    "type": "ui_template",
    "z": "heater-controller-flow",
    "group": "heater-status-group",
    "name": "Heater Status Panel",
    "order": 2,
    "width": 0,
    "height": 0,
    "format": "<div class=\"p-2\">\n  <style>\n    .relay-box {\n      display: inline-block;\n      width: 70px;\n      height: 70px;\n      border-radius: 12px;\n      margin: 6px;\n      text-align: center;\n      font-weight: bold;\n      line-height: 70px;\n      color: white;\n      transition: all 0.3s ease;\n    }\n    .relay-on { background-color: #28a745; }\n    .relay-off { background-color: #6c757d; }\n    .status-grid {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 4px;\n      margin-top: 10px;\n    }\n    .status-item {\n      background: #f8f9fa;\n      border-radius: 8px;\n      padding: 6px 10px;\n      font-size: 14px;\n    }\n  </style>\n  <div>\n    <h4>Heater Controller Status</h4>\n    <div>\n      <div id=\"relayL1\" class=\"relay-box\">L1</div>\n      <div id=\"relayL2\" class=\"relay-box\">L2</div>\n      <div id=\"relayL3\" class=\"relay-box\">L3</div>\n    </div>\n    <div class=\"status-grid\">\n      <div class=\"status-item\">SOC: <b><span id=\"soc\">--</span>%</b></div>\n      <div class=\"status-item\">Battery Power: <b><span id=\"batteryPower\">--</span> W</b></div>\n      <div class=\"status-item\">Boiler Temp: <b><span id=\"boilerTemp\">--</span> Â°C</b></div>\n      <div class=\"status-item\">Inverter Load: <b><span id=\"inverterLoad\">--</span> W</b></div>\n      <div class=\"status-item\">Mode: <b><span id=\"mode\">--</span></b></div>\n      <div class=\"status-item\">Updated: <b><span id=\"updated\">--</span></b></div>\n    </div>\n  </div>\n  <script>\n    (function(scope) {\n      scope.$watch('msg', function(msg) {\n        if (!msg || !msg.payload) return;\n        const d = msg.payload;\n\n        const relays = d.relays || [0, 0, 0];\n        document.getElementById('relayL1').className = 'relay-box ' + (relays[0] ? 'relay-on' : 'relay-off');\n        document.getElementById('relayL2').className = 'relay-box ' + (relays[1] ? 'relay-on' : 'relay-off');\n        document.getElementById('relayL3').className = 'relay-box ' + (relays[2] ? 'relay-on' : 'relay-off');\n\n        document.getElementById('soc').innerText = d.soc?.toFixed(1) ?? '--';\n        document.getElementById('batteryPower').innerText = d.batteryPower?.toFixed(0) ?? '--';\n        document.getElementById('boilerTemp').innerText = d.boilerTemp?.toFixed(1) ?? '--';\n        document.getElementById('inverterLoad').innerText = d.inverterLoad?.toFixed(0) ?? '--';\n        document.getElementById('mode').innerText = d.mode ?? '--';\n        document.getElementById('updated').innerText = new Date().toLocaleTimeString();\n      });\n    })(scope);\n  </script>\n</div>",
    "storeOutMessages": false,
    "fwdInMessages": true,
    "resendOnRefresh": true,
    "templateScope": "local",
    "x": 750,
    "y": 200,
    "wires": []
  },
  {
    "id": "heater-status-group",
    "type": "ui_group",
    "name": "Heater Status",
    "tab": "heater-dashboard-tab",
    "order": 2,
    "disp": true,
    "width": "8",
    "collapse": false
  },
  {
    "id": "heater-dashboard-tab",
    "type": "ui_tab",
    "name": "Heater Control",
    "icon": "fa-fire",
    "order": 1
  }
]